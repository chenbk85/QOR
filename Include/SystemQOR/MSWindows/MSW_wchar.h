//MSW_wchar.h

// Copyright Querysoft Limited 2013, 2015
//
// Permission is hereby granted, free of charge, to any person or organization
// obtaining a copy of the software and accompanying documentation covered by
// this license (the "Software") to use, reproduce, display, distribute,
// execute, and transmit the Software, and to prepare derivative works of the
// Software, and to permit third-parties to whom the Software is furnished to
// do so, all subject to the following:
// 
// The copyright notices in the Software and this entire statement, including
// the above license grant, this restriction and the following disclaimer,
// must be included in all copies of the Software, in whole or in part, and
// all derivative works of the Software, unless such copies or derivative
// works are solely in the form of machine-executable object code generated by
// a source language processor.
// 
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
// SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
// FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
// ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
// DEALINGS IN THE SOFTWARE.

//MSWindows overrides for wchar

#ifndef SYSTEMQOR_MSW_WCHAR_H_3
#define SYSTEMQOR_MSW_WCHAR_H_3

#include "SystemQOR/Posix/Basewchar.h"

//--------------------------------------------------------------------------------
namespace nsWin32
{
	class CLocaleThreadData;
}//nsWin32

//--------------------------------------------------------------------------------
namespace nsWin32
{
	//--------------------------------------------------------------------------------
	class __QOR_INTERFACE( __QSYS ) Cwchar : public nsBaseCRT::Cwchar
	{
	public:

		Cwchar();
		virtual ~Cwchar();

		__QOR_DECLARE_OCLASS_ID( Cwchar );

		__QCMP_STATIC_CONSTANT( int, FL_UNSIGNED = 1 );
		__QCMP_STATIC_CONSTANT( int, FL_NEG = 2 );		//negative sign found
		__QCMP_STATIC_CONSTANT( int, FL_OVERFLOW = 4 );	// overflow occured
		__QCMP_STATIC_CONSTANT( int, FL_READDIGIT = 8 );	// we've read at least one correct digit
		
		virtual int is_wctype( wint_t wc, wctype_t Type );
		virtual int fwprintf( FILE* stream, const wchar_t* format, ... );
		virtual int fwscanf( FILE* stream, const wchar_t* format, ... );
		virtual int swprintf( wchar_t* s, size_t n, const wchar_t* format, ... );
		virtual int swscanf( const wchar_t* s, const wchar_t* format, ... );
		virtual int vfwprintf( FILE* stream, const wchar_t* format, va_list arg );
		virtual int vfwscanf( FILE* stream, const wchar_t* format, va_list arg );
		virtual int vswprintf( wchar_t* s, size_t n, const wchar_t* format, va_list arg );
		virtual int vswscanf( const wchar_t* s, const wchar_t* format, va_list arg );
		virtual int vwprintf( const wchar_t* format, va_list arg );
		virtual int vwscanf( const wchar_t* format, va_list arg );
		virtual int wprintf( const wchar_t* format, va_list vargs );
		virtual int wscanf( const wchar_t* format, ... );
		virtual wint_t fgetwc( FILE* stream );
		virtual wchar_t* fgetws( wchar_t* s, int n, FILE* stream );
		virtual wint_t fputwc( wchar_t c, FILE* stream );
		virtual int fputws( const wchar_t* s, FILE* stream );
		virtual int fwide( FILE* stream, int mode );
		virtual wint_t getwc( FILE* stream );
		virtual wint_t getwchar( void );
		virtual wint_t putwc( wchar_t c, FILE* stream );
		virtual wint_t putwchar( wchar_t c );
		virtual wint_t ungetwc( wint_t c, FILE* stream );
		virtual double wcstod( const wchar_t* nptr, wchar_t** endptr );
		virtual float wcstof( const wchar_t* nptr, wchar_t** endptr );
		virtual long double wcstold( const wchar_t* nptr, wchar_t** endptr );
		virtual long int wcstol( const wchar_t* nptr, wchar_t** endptr, int base );
		virtual long long int wcstoll( const wchar_t* nptr, wchar_t** endptr, int base );
		virtual unsigned long int wcstoul( const wchar_t* nptr, wchar_t** endptr, int base );
		virtual unsigned long long int wcstoull( const wchar_t* nptr, wchar_t** endptr, int base );
		virtual wchar_t* wcscpy( wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcsncpy( wchar_t* s1, const wchar_t* s2, size_t n );
		virtual wchar_t* wmemcpy( wchar_t* s1, const wchar_t* s2, size_t n );
		virtual wchar_t* wmemmove( wchar_t* s1, const wchar_t* s2, size_t n );
		virtual wchar_t* wcscat( wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcsncat( wchar_t* s1, const wchar_t* s2, size_t n );
		virtual int wcscmp( const wchar_t* s1, const wchar_t* s2 );
		virtual int wcscoll( const wchar_t* s1, const wchar_t* s2 );
		virtual int wcsncmp( const wchar_t* s1, const wchar_t* s2, size_t n );
		virtual size_t wcsxfrm( wchar_t* s1, const wchar_t* s2, size_t n );
		virtual int wmemcmp( const wchar_t* s1, const wchar_t* s2, size_t n );
		virtual wchar_t* wcschr( const wchar_t* s, wchar_t c );
		virtual size_t wcscspn( const wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcspbrk( const wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcsrchr( const wchar_t* s, wchar_t c );
		virtual size_t wcsspn( const wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcsstr( const wchar_t* s1, const wchar_t* s2 );
		virtual wchar_t* wcstok( wchar_t* s1, const wchar_t* s2, wchar_t** ptr );
		virtual wchar_t* wmemchr( const wchar_t* s, wchar_t c, size_t n );
		virtual size_t wcslen( const wchar_t* s );
		virtual wchar_t* wmemset( wchar_t* s, wchar_t c, size_t n );
		virtual size_t wcsftime( wchar_t* s, size_t maxsize, const wchar_t* format, const struct tm* timeptr );
		virtual wint_t btowc( int c );
		virtual int wctob( wint_t c );
		virtual int mbsinit( const mbstate_t* ps );
		virtual size_t mbrlen( const char* s, size_t n, mbstate_t* ps );
		virtual size_t mbrtowc( wchar_t* pwc, const char* s, size_t n, mbstate_t* ps );
		virtual size_t wcrtomb( char* s, wchar_t wc, mbstate_t* ps );
		virtual size_t mbsrtowcs( wchar_t* dst, const char** src, size_t len, mbstate_t* ps );
		virtual size_t wcsrtombs( char* dst, const wchar_t** src, size_t len, mbstate_t* ps );

		virtual int wcsncnt( const wchar_t* string, int cnt );
		
		virtual wchar_t* wcswcs( const wchar_t* p1, const wchar_t* p2 );
		virtual int wcswidth( const wchar_t*, size_t );
		virtual int wcwidth( wchar_t );
		virtual int _wcsncnt( const wchar_t* string, int cnt );
        virtual size_t wcsnlen( const wchar_t* str, size_t numberOfElements );
        virtual int isleadbyte( int wc );
        virtual int _wutime64( const wchar_t* filename, __utimbuf64* times );
        virtual int _wutime32( const wchar_t* filename, __utimbuf32* _Time );
        virtual int _wunlink( const wchar_t* filename );
        virtual double _wtof( const wchar_t* string );
        virtual int _wtoi( const wchar_t* string );
        virtual long _wtol( const wchar_t* string );
        virtual Cmp_signed__int64 _wtoi64( const wchar_t* string );
        virtual wchar_t* _wtmpnam( wchar_t* string );
        virtual errno_t _wtmpnam_s( wchar_t* pDstBuf, size_t SizeInWords );
        virtual wchar_t* _wtempnam( const wchar_t* pDirectory, const wchar_t* pFilePrefix );
        virtual int _wsystem( const wchar_t* pCommand );
        virtual wchar_t* _wstrtime( wchar_t* timestr );
        virtual errno_t _wstrtime_s( wchar_t* pBuf, size_t SizeInWords );
        virtual wchar_t* _wstrdate( wchar_t* datestr );
        virtual errno_t _wstrdate_s( wchar_t* pBuf, size_t SizeInWords );
        virtual int _wstat32( const wchar_t* pName, _stat32* pStat );
        virtual int _wstat32i64( const wchar_t* pName, _stat32i64* pStat );
        virtual int _wstat64( const wchar_t* pName, _stat64* pStat );
        virtual int _wstat64i32( const wchar_t* pName, _stat64i32* pStat );
        virtual void _wsplitpath( const wchar_t* path, wchar_t* drive, wchar_t* dir, wchar_t* fname, wchar_t* ext );
        virtual errno_t _wsplitpath_s( const wchar_t* pFullPath, wchar_t* pDrive, size_t DriveSize, wchar_t* pDir, size_t DirSize, wchar_t* pFilename, size_t FilenameSize, wchar_t* pExt, size_t ExtSize );
        virtual intptr_t _wspawnvpe( int _Mode, const wchar_t* Filename, const wchar_t* const* _ArgList, const wchar_t* const* _Env );
        virtual intptr_t _wspawnvp( int _Mode, const wchar_t* Filename, const wchar_t* const* _ArgList );
        virtual intptr_t _wspawnve( int _Mode, const wchar_t* Filename, const wchar_t* const* _ArgList, const wchar_t* const* _Env );
        virtual intptr_t _wspawnv( int _Mode, const wchar_t* Filename, const wchar_t* const* _ArgList );
        virtual intptr_t _wspawnlpe( int _Mode, const wchar_t* Filename, const wchar_t* _ArgList, ... );
        virtual intptr_t _wspawnlp( int _Mode, const wchar_t* Filename, const wchar_t* _ArgList, ... );
        virtual intptr_t _wspawnle( int _Mode, const wchar_t* Filename, const wchar_t* _ArgList, ... );
        virtual intptr_t _wspawnl( int _Mode, const wchar_t* Filename, const wchar_t* _ArgList, ... );
        virtual size_t __wcsncnt( const wchar_t* pStr, size_t MaxCount );
        virtual int fwprintf_s( FILE* pFile, const wchar_t* format, va_list vargs );
        virtual int fwscanf_s( FILE* pFile, const wchar_t* format, va_list vargs );
        virtual int swscanf_s( const wchar_t* s, const wchar_t* format, va_list vargs );
        virtual errno_t mbsrtowcs_s( size_t* pRetval, wchar_t* pDst, size_t Size, const char** ppSrc, size_t n, mbstate_t* _State );
        virtual int swprintf_s( wchar_t* s, size_t SizeInWords, const wchar_t* format, va_list vargs );
        virtual int wscanf_s( const wchar_t* __QCMP_RESTRICT format, va_list vargs );
        virtual int vfwprintf_s( FILE* stream, const wchar_t* format, va_list arg );
        virtual int vwprintf_s( const wchar_t* format, va_list arg );
        virtual int _vswprintf( wchar_t* string, const wchar_t* format, va_list arg );
        virtual int vswprintf_s( wchar_t* s, size_t n, const wchar_t* format, va_list arg );
        virtual errno_t wcrtomb_s( size_t* pReturnValue, char* mbchar, size_t sizeOfmbchar, wchar_t* wchar, mbstate_t* mbstate );
        virtual errno_t wcscat_s( wchar_t* strDestination, size_t numberOfElements, const wchar_t* strSource );
        virtual errno_t wcscpy_s( wchar_t* strDestination, size_t numberOfElements, const wchar_t* strSource );
        virtual errno_t wcsncat_s( wchar_t* strDest, size_t numberOfElements, const wchar_t* strSource, size_t count );
        virtual errno_t wcsncpy_s( wchar_t* strDest, size_t numberOfElements, const wchar_t* strSource, size_t count );
        virtual errno_t wcsrtombs_s( size_t* pReturnValue, char* mbstr, size_t sizeInBytes, const wchar_t** wcstr, size_t count, mbstate_t* mbstate );
        virtual wchar_t* wcstok_s( wchar_t* strToken, const wchar_t* strDelimit, wchar_t** context );
        virtual int wprintf_s( const wchar_t* __QCMP_RESTRICT format, va_list vargs );

		virtual size_t mbsnrtowcs( wchar_t* wcstr, const char** mbstr, size_t nmc, size_t len, mbstate_t* mbState );
		virtual FILE* open_wmemstream( wchar_t** bufp, size_t* sizep );
		virtual wchar_t* wcpcpy( wchar_t* ws1, const wchar_t* ws2 );
		virtual wchar_t* wcpncpy( wchar_t* ws1, const wchar_t* ws2, size_t n );
		virtual int wcscasecmp( const wchar_t* ws1, const wchar_t* ws2 );
		virtual int wcscasecmp_l( const wchar_t* ws1, const wchar_t* ws2, locale_t l );
		virtual int wcscoll_l( const wchar_t* ws1, const wchar_t* ws2, locale_t l );
		virtual wchar_t* wcsdup( const wchar_t* ws );
		virtual int wcsncasecmp( const wchar_t* ws1, const wchar_t* ws2, size_t n );
		virtual int wcsncasecmp_l( const wchar_t* ws1, const wchar_t* ws2, size_t n, locale_t l );
		virtual size_t wcsnrtombs( char* dst, const wchar_t** src, size_t nwc, size_t len, mbstate_t* ps );
		virtual size_t wcsxfrm_l( wchar_t* s1, const wchar_t* s2, size_t n, locale_t l );
		virtual int _swprintf_p_l( wchar_t* buffer, size_t sizeOfBuffer, const wchar_t* format, locale_t locale, va_list );
		virtual int _swprintf_s_l( wchar_t* buffer, size_t sizeOfBuffer, const wchar_t* format, locale_t locale, va_list );
		virtual int _swscanf_l( const wchar_t* buffer, const wchar_t* format, locale_t locale, va_list );
		virtual int _swscanf_s_l( const wchar_t* buffer, const wchar_t* format, locale_t locale, va_list );
		virtual double _wtof_l( const wchar_t* string, ::_locale_t locale );
		virtual int _wtoi_l( const wchar_t* string, ::_locale_t locale );
		virtual long _wtol_l( const wchar_t* string, ::_locale_t locale );
		virtual Cmp_signed__int64 _wtoi64_l( const wchar_t* string, ::_locale_t locale );
		//virtual int _wstat64( const wchar_t* pName, _stat64* pStat );
		virtual int _wsopen( const wchar_t* pFilename, int OpenFlag, int ShareFlag, int PermissionMode );
		virtual errno_t _wsopen_s( int* pFileHandle, const wchar_t* pFilename, int OpenFlag, int ShareFlag, int PermissionFlag );
		virtual wchar_t* _wsetlocale( int Category, const wchar_t* pLocale );
		virtual void _wsearchenv( const wchar_t* filename, const wchar_t* varname, wchar_t* pathname );
		virtual errno_t _wsearchenv_s( const wchar_t* pFilename, const wchar_t* pEnvVar, wchar_t* pResultPath, size_t SizeInWords );
		virtual int _wrmdir( const wchar_t* pPath );
		virtual int _wrename( const wchar_t* pOldFilename, const wchar_t* pNewFilename );
		virtual int _wremove( const wchar_t* pFilename );
		virtual errno_t _wputenv_s( const wchar_t* pName, const wchar_t* pValue );
		virtual int _wputenv( const wchar_t* pEnvString );
		virtual int _wprintf_p( const wchar_t* pFormat, va_list );
		virtual int _wprintf_l( const wchar_t* format, locale_t locale, va_list );
		virtual FILE* _wpopen( const wchar_t* pCommand, const wchar_t* pMode );
		virtual void _wperror( const wchar_t* pErrMsg );
		virtual int _wopen( const wchar_t* pFilename, int OpenFlag, va_list );
		virtual errno_t _wmktemp_s( wchar_t* pTemplateName, size_t SizeInWords );
		virtual wchar_t* _wmktemp( wchar_t* pTemplate );
		virtual int _wmkdir( const wchar_t* pPath );
		virtual errno_t _wmakepath_s( wchar_t* pPathResult, size_t SizeInBytes, const wchar_t* pDrive, const wchar_t* pDir, const wchar_t* pFilename, const wchar_t* pExt );
		virtual void _wmakepath( wchar_t* path, const wchar_t* drive, const wchar_t* dir, const wchar_t* fname, const wchar_t* ext );
		virtual wchar_t* _wgetenv( const wchar_t* _VarName );
		virtual errno_t _wgetenv_s( size_t* pReturnSize, wchar_t* pDstBuf, size_t DstSizeInWords, const wchar_t* pVarName );
		virtual wchar_t* _wgetdcwd( int oDrive, wchar_t* pDstBuf, int SizeInWords );
		virtual wchar_t* _wgetdcwd_nolock( int iDrive, wchar_t* pDstBuf, int SizeInWords );
		virtual wchar_t* _wgetcwd( wchar_t* pDstBuf, int SizeInWords );
		virtual wchar_t* _wfullpath( wchar_t* pFullPath, const wchar_t* pPath, size_t SizeInWords );
		virtual wchar_t* _wfullpath_dbg( wchar_t* absPath, const wchar_t* relPath, size_t maxLength, int blockType, const char* filename, int linenumber );
		virtual FILE* _wfsopen( const wchar_t* pFilename, const wchar_t* pMode );
		virtual FILE* _wfreopen( const wchar_t* pFilename, const wchar_t* pMode, FILE* pOldFile );
		virtual errno_t _wfreopen_s( FILE** pFile, const wchar_t* pFilename, const wchar_t* pMode, FILE* pOldFile );
		virtual FILE* _wfopen( const wchar_t* pFilename, const wchar_t* pMode );
		virtual errno_t _wfopen_s( FILE** ppFile, const wchar_t* pFilename, const wchar_t* pMode );
		virtual int _wfindnext( intptr_t handle, _wfinddata_t* fileinfo );
		virtual int _wfindnext32( intptr_t FindHandle, _wfinddata32_t* pFindData );
		virtual int _wfindnext32i64( intptr_t FindHandle, _wfinddata32i64_t* pFindData );
		virtual int _wfindnext64( intptr_t FindHandle, _wfinddata64_t* pFindData );
		virtual int _wfindnexti64( intptr_t handle, _wfinddatai64_t* fileinfo );
		virtual int _wfindnext64i32( intptr_t FindHandle, _wfinddata64i32_t* pFindData );
		virtual intptr_t _wfindfirst( const wchar_t* filespec, _wfinddata_t* fileinfo );
		virtual intptr_t _wfindfirst32( const wchar_t* pFilename, _wfinddata32_t* pFindData );
		virtual intptr_t _wfindfirst32i64( const wchar_t* pFilename, _wfinddata32i64_t* pFindData );
		virtual intptr_t _wfindfirst64( const wchar_t* pFilename, _wfinddata64_t* pFindData );
		virtual intptr_t _wfindfirsti64( const wchar_t* filespec, _wfinddatai64_t* fileinfo );
		virtual intptr_t _wfindfirst64i32( const wchar_t* pFilename, _wfinddata64i32_t* pFindData );
		virtual FILE* _wfdopen( int FileHandle, const wchar_t* pMode );
		virtual intptr_t _wexecvpe( const wchar_t* pFilename, const wchar_t* const* ArgList, const wchar_t* const* pEnv );
		virtual intptr_t _wexecvp( const wchar_t* pFilename, const wchar_t* const* ArgList );
		virtual intptr_t _wexecve( const wchar_t* pFilename, const wchar_t* const* ArgList, const wchar_t* const* pEnv );
		virtual intptr_t _wexecv( const wchar_t* pFilename, const wchar_t* const* ArgList );
		virtual intptr_t _wexeclpe( const wchar_t* pFilename, const wchar_t* pArgList, va_list );
		virtual intptr_t _wexeclp( const wchar_t* pFilename, const wchar_t* pArgList, va_list );
		virtual intptr_t _wexecle( const wchar_t* pFilename, const wchar_t* pArgList, va_list );
		virtual intptr_t _wexecl( const wchar_t* pFilename, const wchar_t* pArgList, va_list );
		virtual errno_t _wdupenv_s( wchar_t** ppBuffer, size_t* pBufferSizeInWords, const wchar_t* pVarName );
		virtual wchar_t* _wctime( const time_t* timer );
		virtual wchar_t* _wctime32( const __time32_t* pTime );
		virtual errno_t _wctime32_s( wchar_t* pBuf, size_t SizeInWords, const __time32_t* pTime );
		virtual wchar_t* _wctime64( const __time64_t* pTime );
		virtual errno_t _wctime64_s( wchar_t* pBuf, size_t SizeInWords, const __time64_t* pTime );
		virtual wchar_t* _wcsupr( wchar_t* pStr );
		virtual errno_t _wcsupr_s( wchar_t* pStr, size_t Size );
		virtual Cmp_signed__int64 _wcstoi64( const wchar_t* pStr, wchar_t** ppEndPtr, int iRadix );
		virtual Cmp_unsigned__int64 _wcstoui64( const wchar_t* pStr, wchar_t** ppEndPtr, int iRadix );
		virtual wchar_t* _wcsset( wchar_t* pStr, wchar_t Val );
		virtual errno_t _wcsset_s( wchar_t* pStr, size_t SizeInWords, wchar_t Val );
		virtual wchar_t* _wcsrev( wchar_t* pStr );
		virtual wchar_t* _wcsnset( wchar_t* pStr, wchar_t Val, size_t MaxCount );
		virtual errno_t _wcsnset_s( wchar_t* pDst, size_t DstSizeInWords, wchar_t Val, size_t MaxCount );
		virtual int _wcsncoll( const wchar_t* pStr1, const wchar_t* pStr2, size_t MaxCount );
		virtual int _wcsnicoll( const wchar_t* pStr1, const wchar_t* pStr2, size_t MaxCount );
		virtual int _wcsnicmp( const wchar_t* pStr1, const wchar_t* pStr2, size_t MaxCount );
		virtual wchar_t* _wcslwr( wchar_t* String );
		virtual errno_t _wcslwr_s( wchar_t* pStr, size_t SizeInWords );
		virtual int _wcsicoll( const wchar_t* pStr1, const wchar_t* pStr2 );
		virtual int _wcsicmp( const wchar_t* pStr1, const wchar_t* pStr2 );
		virtual wchar_t* _wcsdup( const wchar_t* pStr );
		virtual int _wcreat( const wchar_t* pFilename, int iPermissionMode );
		virtual int _wchmod( const wchar_t* pFilename, int iMode );
		virtual int _wchdir( const wchar_t* pPath );
		virtual wchar_t* _wcserror( int ErrNum );
		virtual errno_t _wcserror_s( wchar_t* pBuf, size_t SizeInWords, int ErrNum );
		virtual wchar_t* _wasctime( const tm* pTm );
		virtual errno_t _wasctime_s( wchar_t* pBuf, size_t SizeInWords, const tm* pTm );
		virtual int _waccess( const wchar_t* pFilename, int iAccessMode );
		virtual errno_t _waccess_s( const wchar_t* pFilename, int iAccessMode );
		virtual wchar_t* __wcserror( const wchar_t* pStr );
		virtual errno_t __wcserror_s( wchar_t* pBuffer, size_t SizeInWords, const wchar_t* pErrMsg );
		virtual void _wassert( const wchar_t* pMessage, const wchar_t* pFile, unsigned uiLine );
		virtual int _wscanf_l( const wchar_t* format, locale_t locale, va_list );
		virtual int _wscanf_s_l( const wchar_t* format, locale_t locale, va_list );
		virtual int _vcprintf( const char* format, va_list argptr );
		virtual int _vcprintf_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vcprintf_p( const char* format, va_list argptr );
		virtual int _vcprintf_p_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vcprintf_s( const char* format, va_list argptr );
		virtual int _vcprintf_s_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vcwprintf( const wchar_t* format, va_list argptr );
		virtual int _vcwprintf_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vcwprintf_p( const wchar_t* format, va_list argptr );
		virtual int _vcwprintf_p_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vcwprintf_s( const wchar_t* format, va_list argptr );
		virtual int _vcwprintf_s_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vfprintf_l( FILE* stream, const char* format, locale_t locale, va_list argptr );
		virtual int _vfprintf_p( FILE* stream, const char* format, va_list argptr );
		virtual int _vfprintf_p_l( FILE* stream, const char* format, locale_t locale, va_list argptr );
		virtual int _vfprintf_s_l( FILE* stream, const char* format, locale_t locale, va_list argptr );
		virtual int _vfwprintf_l( FILE* stream, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vfwprintf_p( FILE* stream, const wchar_t* format, va_list argptr );
		virtual int _vfwprintf_p_l( FILE* stream, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vfwprintf_s_l( FILE* stream, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vprintf_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vprintf_p( const char* format, va_list argptr );
		virtual int _vprintf_p_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vprintf_s_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vscprintf( const char* format, va_list argptr );
		virtual int _vscprintf_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vscprintf_p_l( const char* format, locale_t locale, va_list argptr );
		virtual int _vscwprintf( const wchar_t* format, va_list argptr );
		virtual int _vscwprintf_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vscwprintf_p_l( const wchar_t* _Format, ::_locale_t _Locale, va_list _ArgList );
		virtual int _vsnprintf( char* buffer, size_t count, const char* format, va_list argptr );
		virtual int _vsnprintf_c( char* _DstBuf, size_t _MaxCount, const char* _Format, va_list _ArgList );
		virtual int _vsnprintf_c_l( char* _DstBuf, size_t _MaxCount, const char* szFormat, ::_locale_t _Locale, va_list _ArgList );
		virtual int _vsnprintf_l( char* buffer, size_t count, const char* format, locale_t locale, va_list argptr );
		virtual int _vsnprintf_s( char* buffer, size_t sizeOfBuffer, size_t count, const char* format, va_list argptr );
		virtual int _vsnprintf_s_l( char* buffer, size_t sizeOfBuffer, size_t count, const char* format, locale_t locale, va_list argptr );
		virtual int _vsnwprintf( wchar_t* buffer, size_t count, const wchar_t* format, va_list argptr );
		virtual int _vsnwprintf_l( wchar_t* buffer, size_t count, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vsnwprintf_s( wchar_t* buffer, size_t sizeOfBuffer, size_t count, const wchar_t* format, va_list argptr );
		virtual int _vsnwprintf_s_l( wchar_t* buffer, size_t sizeOfBuffer, size_t count, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vsprintf_l( char* buffer, const char* format, locale_t locale, va_list argptr );
		virtual int _vsprintf_p( char* buffer, size_t sizeInBytes, const char* format, va_list argptr );
		virtual int _vsprintf_p_l( char* buffer, size_t sizeInBytes, const char* format, locale_t locale, va_list argptr );
		virtual int _vsprintf_s_l( char* buffer, size_t numberOfElements, const char* format, locale_t locale, va_list argptr );
		virtual int _vswprintf_c_l( wchar_t* _DstBuf, size_t _MaxCount, const wchar_t* _Format, ::_locale_t _Locale, va_list _ArgList );
		virtual int _vswprintf_l( wchar_t* buffer, size_t count, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vswprintf_p_l( wchar_t* buffer, size_t count, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vswprintf_s_l( wchar_t* buffer, size_t numberOfElements, const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vwprintf_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vwprintf_p( const wchar_t* format, va_list ArgList );
		virtual int _vwprintf_p_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _vwprintf_s_l( const wchar_t* format, locale_t locale, va_list argptr );
		virtual int _wprintf_s_l( const wchar_t* format, locale_t locale, va_list );
		virtual int _wprintf_p_l( const wchar_t* format, locale_t locale, va_list );
		virtual int _vswprintf_p( wchar_t* string, size_t MaxCount, const wchar_t* format, va_list ArgList );
		virtual int _vswprintf_c( wchar_t* string, size_t count, const wchar_t* format, va_list ArgList );
		virtual int _woutput_s( const wchar_t* format, va_list argptr );
		virtual errno_t _wctomb_s_l( int* pRetValue, char* mbchar, size_t sizeInBytes, wchar_t wchar, ::_locale_t locale );
		virtual int _wctomb_l( char* mbchar, wchar_t wchar, ::_locale_t locale );
		virtual errno_t _wcsupr_s_l( wchar_t* str, size_t numberOfElements, ::_locale_t locale );
		virtual wchar_t* _wcsupr_l( wchar_t* str, ::_locale_t locale );
		virtual unsigned long _wcstoul_l( const wchar_t* nptr, wchar_t** endptr, int base, ::_locale_t locale );
		virtual Cmp_unsigned__int64 _wcstoui64_l( const wchar_t* nptr, wchar_t** endptr, int base, ::_locale_t locale );
		virtual errno_t _wcstombs_s_l( size_t* pReturnValue, char* mbstr, size_t sizeInBytes, const wchar_t* wcstr, size_t count, ::_locale_t locale );
		virtual size_t _wcstombs_l( char* mbstr, const wchar_t* wcstr, size_t count, ::_locale_t locale );
		virtual long _wcstol_l( const wchar_t* nptr, wchar_t** endptr, int base, ::_locale_t locale );
		virtual Cmp__int64 _wcstoi64_l( const wchar_t* nptr, wchar_t** endptr, int base, ::_locale_t locale );
		virtual int _wcsnicoll_l( const wchar_t* string1, const wchar_t* string2, size_t count, ::_locale_t locale );
		virtual int _wcsnicmp_l( const wchar_t* string1, const wchar_t* string2, size_t count );
		virtual int _wcsncoll_l( const wchar_t* string1, const wchar_t* string2, size_t count, ::_locale_t locale );
		virtual errno_t _wcslwr_s_l( wchar_t* str, size_t numberOfElements, ::_locale_t locale );
		virtual wchar_t* _wcslwr_l( wchar_t* str, ::_locale_t locale );
		virtual int _wcsicoll_l( const wchar_t* string1, const wchar_t* string2, ::_locale_t locale );
		virtual int _wcsicmp_l( const wchar_t* string1, const wchar_t* string2, ::_locale_t locale );
		virtual size_t _wcsftime_l( wchar_t* strDest, size_t maxsize, const wchar_t* format, const tm* timeptr, ::_locale_t locale );
		virtual wchar_t* _wcsdup_dbg( const wchar_t* strSource, int blockType, const char* filename, int linenumber );
		virtual unsigned int _mbbtombc( unsigned int c );
		virtual unsigned int _mbbtombc_l( unsigned int c, ::_locale_t locale );
		virtual int _mbbtype( unsigned char c, int type );
		virtual void _mbccpy( unsigned char* dest, const unsigned char* src );
		virtual void _mbccpy_l( unsigned char* dest, const unsigned char* src, ::_locale_t locale );
		virtual errno_t _mbccpy_s( unsigned char* dest, size_t buffSizeInBytes, int* pCopied, const unsigned char* src );
		virtual errno_t _mbccpy_s_l( unsigned char* dest, size_t buffSizeInBytes, int* pCopied, const unsigned char* src, locale_t locale );
		virtual unsigned int _mbcjistojms( unsigned int c );
		virtual unsigned int _mbcjistojms_l( unsigned int c, ::_locale_t locale );
		virtual unsigned int _mbcjmstojis( unsigned int c );
		virtual unsigned int _mbcjmstojis_l( unsigned int c, ::_locale_t locale );
		virtual size_t _mbclen( const unsigned char* c );
		virtual int _mbclen_l( const char* mbstr, size_t count, ::_locale_t locale );
		virtual unsigned int _mbctohira( unsigned int c );
		virtual unsigned int _mbctohira_l( unsigned int c, ::_locale_t locale );
		virtual unsigned int _mbctokata( unsigned int c );
		virtual unsigned int _mbctokata_l( unsigned int c, ::_locale_t locale );
		virtual unsigned int _mbctolower( unsigned int c );
		virtual unsigned int _mbctolower_l( unsigned int c, ::_locale_t locale );
		virtual unsigned int _mbctoupper( unsigned int c );
		virtual unsigned int _mbctoupper_l( unsigned int c, ::_locale_t locale );
		virtual unsigned int _mbctombb( unsigned int c );
		virtual unsigned int _mbctombb_l( unsigned int c, ::_locale_t locale );
		virtual int _mblen_l( const char* mbstr, size_t count, ::_locale_t locale );
		virtual int _mbsbtype( const unsigned char* mbstr, size_t count );
		virtual int _mbsbtype_l( const unsigned char* mbstr, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbscat( unsigned char* strDestination, const unsigned char* strSource );
		virtual errno_t _mbscat_s( unsigned char* strDestination, size_t numberOfElements, const unsigned char* strSource );
		virtual errno_t _mbscat_s_l( unsigned char* strDest, size_t numberOfElements, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbschr( const unsigned char* str, unsigned int c );
		virtual unsigned char* _mbschr_l( const unsigned char* str, unsigned int c, ::_locale_t locale );
		virtual int _mbscmp( const unsigned char* string1, const unsigned char* string2 );
		virtual int _mbscmp_l( const unsigned char* string1, const unsigned char* string2, ::_locale_t locale );
		virtual int _mbscoll( const unsigned char* string1, const unsigned char* string2 );
		virtual int _mbscoll_l( const unsigned char* string1, const unsigned char* string2, ::_locale_t locale );
		virtual unsigned char* _mbscpy( unsigned char* strDestination, const unsigned char* strSource );
		virtual errno_t _mbscpy_s( unsigned char* strDestination, size_t numberOfElements, const unsigned char* strSource );
		virtual errno_t _mbscpy_s_l( unsigned char* strDestination, size_t numberOfElements, const unsigned char* strSource, ::_locale_t locale );
		virtual size_t _mbscspn( const unsigned char* str, const unsigned char* strCharSet );
		virtual size_t _mbscspn_l( const unsigned char* str, const unsigned char* strCharSet, ::_locale_t locale );
		virtual unsigned char* _mbsdec( const unsigned char* start, const unsigned char* current );
		virtual unsigned char* _mbsdec_l( const unsigned char* start, const unsigned char* current, ::_locale_t locale );
		virtual unsigned char* _mbsdup( const unsigned char* strSource );
		virtual int _mbsicmp( const unsigned char* string1, const unsigned char* string2 );
		virtual int _mbsicmp_l( const unsigned char* string1, const unsigned char* string2, ::_locale_t locale );
		virtual int _mbsicoll( const unsigned char* string1, const unsigned char* string2 );
		virtual int _mbsicoll_l( const unsigned char* string1, const unsigned char* string2, ::_locale_t locale );
		virtual unsigned char* _mbsinc( const unsigned char* current );
		virtual unsigned char* _mbsinc_l( const unsigned char* current, ::_locale_t locale );
		virtual size_t _mbslen( const unsigned char* str );
		virtual size_t _mbslen_l( const unsigned char* str, ::_locale_t locale );
		virtual unsigned char* _mbslwr( unsigned char* str );
		virtual unsigned char* _mbslwr_l( unsigned char* str, ::_locale_t locale );
		virtual errno_t _mbslwr_s( unsigned char* str, size_t numberOfElements );
		virtual errno_t _mbslwr_s_l( unsigned char* str, size_t numberOfElements, ::_locale_t locale );
		virtual unsigned char* _mbsnbcat( unsigned char* dest, const unsigned char* src, size_t count );
		virtual unsigned char* _mbsnbcat_l( unsigned char* dest, const unsigned char* src, size_t count, ::_locale_t locale );
		virtual errno_t _mbsnbcat_s( unsigned char* dest, size_t sizeInBytes, const unsigned char* src, size_t count );
		virtual errno_t _mbsnbcat_s_l( unsigned char* dest, size_t sizeInBytes, const unsigned char* src, size_t count, ::_locale_t locale );
		virtual int _mbsnbcmp( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnbcmp_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual size_t _mbsnbcnt( const unsigned char* str, size_t count );
		virtual size_t _mbsnbcnt_l( const unsigned char* str, size_t count, ::_locale_t locale );
		virtual int _mbsnbcoll( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnbcoll_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbsnbcpy( unsigned char* strDest, const unsigned char* strSource, size_t count );
		virtual unsigned char* _mbsnbcpy_l( unsigned char* strDest, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual errno_t _mbsnbcpy_s( unsigned char* strDest, size_t sizeInBytes, const unsigned char* strSource, size_t count );
		virtual errno_t _mbsnbcpy_s_l( unsigned char* strDest, size_t sizeInBytes, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual int _mbsnbicmp( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnbicmp_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual int _mbsnbicoll( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnbicoll_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbsnbset( unsigned char* str, unsigned int c, size_t count );
		virtual unsigned char* _mbsnbset_l( unsigned char* str, unsigned int c, size_t count, ::_locale_t locale );
		virtual errno_t _mbsnbset_s( unsigned char* str, size_t size, unsigned int c, size_t count );
		virtual errno_t _mbsnbset_s_l( unsigned char* str, size_t size, unsigned int c, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbsncat( unsigned char* strDest, const unsigned char* strSource, size_t count );
		virtual unsigned char* _mbsncat_l( unsigned char* strDest, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual errno_t _mbsncat_s( unsigned char* strDest, size_t numberOfElements, const unsigned char* strSource, size_t count );
		virtual errno_t _mbsncat_s_l( unsigned char* strDest, size_t numberOfElements, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual size_t _mbsnccnt( const unsigned char* str, size_t count );
		virtual size_t _mbsnccnt_l( const unsigned char* str, size_t count, ::_locale_t locale );
		virtual int _mbsncmp( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsncmp_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual int _mbsncoll( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsncoll_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbsncpy( unsigned char* strDest, const unsigned char* strSource, size_t count );
		virtual unsigned char* _mbsncpy_l( unsigned char* strDest, const unsigned char* strSource, size_t count, ::_locale_t locale );
		virtual errno_t _mbsncpy_s( unsigned char* strDest, size_t numberOfElements, const unsigned char* strSource, size_t count );
		virtual errno_t _mbsncpy_s_l( unsigned char* strDest, size_t numberOfElements, const unsigned char* strSource, size_t count, locale_t locale );
		virtual unsigned int _mbsnextc( const unsigned char* str );
		virtual unsigned int _mbsnextc_l( const unsigned char* str, ::_locale_t locale );
		virtual int _mbsnicmp( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnicmp_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual int _mbsnicoll( const unsigned char* string1, const unsigned char* string2, size_t count );
		virtual int _mbsnicoll_l( const unsigned char* string1, const unsigned char* string2, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbsninc( const unsigned char* str, size_t count );
		virtual unsigned char* _mbsninc_l( const unsigned char* str, size_t count, ::_locale_t locale );
		virtual size_t _mbsnlen( const unsigned char* str, size_t numberOfElements );
		virtual size_t _mbsnlen_l( const unsigned char* str, size_t numberOfElements, ::_locale_t locale );
		virtual unsigned char* _mbsnset( unsigned char* str, unsigned int c, size_t count );
		virtual unsigned char* _mbsnset_l( unsigned char* str, unsigned int c, size_t count, ::_locale_t locale );
		virtual errno_t _mbsnset_s( unsigned char* str, size_t numberOfElements, unsigned int c, size_t count );
		virtual errno_t _mbsnset_s_l( unsigned char* str, size_t numberOfElements, unsigned int c, size_t count, ::_locale_t locale );
		virtual unsigned char* _mbspbrk( const unsigned char* str, const unsigned char* strCharSet );
		virtual unsigned char* _mbspbrk_l( unsigned char* str, const unsigned char* strCharSet, ::_locale_t locale );
		virtual unsigned char* _mbsrchr( const unsigned char* str, unsigned int c );
		virtual unsigned char* _mbsrchr_l( const unsigned char* str, unsigned int c, ::_locale_t locale );
		virtual unsigned char* _mbsrev( unsigned char* str );
		virtual unsigned char* _mbsrev_l( unsigned char* str, ::_locale_t locale );
		virtual unsigned char* _mbsset( unsigned char* str, unsigned int c );
		virtual unsigned char* _mbsset_l( unsigned char* str, unsigned int c, ::_locale_t locale );
		virtual errno_t _mbsset_s( unsigned char* str, size_t numberOfElements, unsigned int c );
		virtual errno_t _mbsset_s_l( unsigned char* str, size_t numberOfElements, unsigned int c, ::_locale_t locale );
		virtual size_t _mbsspn( const unsigned char* str, const unsigned char* strCharSet );
		virtual size_t _mbsspn_l( const unsigned char* str, const unsigned char* strCharSet, ::_locale_t locale );
		virtual unsigned char* _mbsspnp( const unsigned char* str, const unsigned char* charset );
		virtual unsigned char* _mbsspnp_l( const unsigned char* str, const unsigned char* charset, ::_locale_t locale );
		virtual unsigned char* _mbsstr( const unsigned char* str, const unsigned char* strSearch );
		virtual unsigned char* _mbsstr_l( const unsigned char* str, const unsigned char* strSearch, ::_locale_t locale );
		virtual unsigned char* _mbstok( unsigned char* strToken, const unsigned char* strDelimit );
		virtual unsigned char* _mbstok_l( unsigned char* strToken, const unsigned char* strDelimit, ::_locale_t locale );
		virtual unsigned char* _mbstok_s( unsigned char* strToken, const unsigned char* strDelimit, char** context );
		virtual unsigned char* _mbstok_s_l( unsigned char* strToken, const unsigned char* strDelimit, char** context, ::_locale_t locale );
		virtual size_t _mbstowcs_l( wchar_t* wcstr, const char* mbstr, size_t count, ::_locale_t locale );
		virtual errno_t _mbstowcs_s_l( size_t* pReturnValue, wchar_t* wcstr, size_t sizeInWords, const char* mbstr, size_t count, ::_locale_t locale );
		virtual size_t _mbstrlen( const char* str );
		virtual size_t _mbstrlen_l( const char* str, ::_locale_t locale );
		virtual size_t _mbstrnlen( const char* str, size_t numberOfElements );
		virtual size_t _mbstrnlen_l( const char* str, size_t numberOfElements, ::_locale_t locale );
		virtual unsigned char* _mbsupr( unsigned char* str );
		virtual unsigned char* _mbsupr_l( unsigned char* str, ::_locale_t locale );
		virtual errno_t _mbsupr_s( unsigned char* str, size_t numberOfElements );
		virtual errno_t _mbsupr_s_l( unsigned char* str, size_t numberOfElements, ::_locale_t locale );
		virtual int _mbtowc_l( wchar_t* wchar, const char* mbchar, size_t count, ::_locale_t locale );

	private:

		static unsigned long wcstoxl ( nsWin32::CLocaleThreadData* pLocThreadData, const wchar_t* nptr, const wchar_t** endptr, int ibase, int flags );
		size_t _mbstowcs_l_helper( wchar_t* pwcs, const char* s, size_t n, ::_locale_t plocinfo );
		int _wchartodigit( wchar_t ch );

		bool __ascii_iswalpha( wchar_t c)
		{
			return ( ( L'A' <= (c) && (c) <= L'Z') || ( L'a' <= (c) && (c) <= L'z') );
		}

		wchar_t __ascii_towupper( wchar_t c )
		{
			return ((((c) >= L'a') && ((c) <= L'z')) ? ((c) - L'a' + L'A') : (c) );
		}

		Cwchar( const Cwchar& );
		Cwchar& operator = ( const Cwchar& );
	};

}//nsWin32

#endif//SYSTEMQOR_MSW_WCHAR_H_3

